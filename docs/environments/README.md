# Управление окружениями в GPROD Backend

## Содержание

- [Обзор системы окружений](#обзор-системы-окружений)
- [Структура файлов окружения](environment-structure.md)
- [Работа с EnvironmentService](environment-service.md)
- [Система доставки окружений](environment-delivery.md)

## Обзор системы окружений

GPROD Backend использует гибкую систему управления переменными окружения, которая поддерживает четыре основных контура:

| Контур | Описание | Файл конфигурации | Порт API |
|--------|----------|-------------------|----------|
| **Development** (`dev`) | Для локальной разработки | `.env.development` | 3000 |
| **Staging** (`stage`) | Для тестирования перед продакшеном | `.env.staging` | 3100 |
| **Production** (`prod`) | Для промышленной эксплуатации | `.env.production` | 3200 |
| **Test** (`test`) | Специально для запуска тестов | `.env.test` | 3300 |

## Файлы окружения

Для каждого контура используется отдельный файл переменных окружения:

- `.env.development` - переменные для разработки
- `.env.staging` - переменные для staging-среды
- `.env.production` - переменные для продакшена
- `.env.test` - специальные переменные для тестов

Шаблоны этих файлов находятся в директории `.env-templates/`.

## Преимущества системы окружений

- ✅ **Изоляция конфигураций** - каждый контур имеет свой набор переменных
- ✅ **Безопасность** - меньший риск утечки продакшн-параметров в другие окружения
- ✅ **Прозрачность** - легко увидеть полную конфигурацию для каждого контура
- ✅ **Версионный контроль** - можно хранить шаблоны или некритичные параметры в системе контроля версий
- ✅ **Упрощение CI/CD** - легко интегрировать с системами CI/CD

## Компоненты системы

Система управления окружениями состоит из следующих ключевых компонентов:

1. **Файлы окружения (.env.*)** - хранят переменные для каждого контура
2. **EnvironmentService** - класс для типизированного доступа к переменным
3. **Система доставки окружений** - скрипты для переключения между контурами
4. **Шаблоны** - примеры конфигураций для разных контуров

Для более подробной информации см. соответствующие разделы документации.
